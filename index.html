

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English-Vietnamese Vocabulary Practice</title>
    <meta name="description" content="Practice English and Vietnamese vocabulary and sentences for 4th graders, based on 12 common topics. An interactive flashcard game to improve reading and translation skills.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
    {
      "imports": {
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "react": "https://esm.sh/react@18.2.0"
      }
    }
    </script>
    <style>
      @keyframes fade-in {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-fade-in {
        animation: fade-in 0.5s ease-out forwards;
      }
    </style>
</head>
<body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="module">
        import React, { useState, useEffect, useMemo, useCallback } from 'react';
        import ReactDOM from 'react-dom/client';

        // --- Types & Constants ---
        const GameState = {
            READ: 'READ',
            TRANSLATE: 'TRANSLATE',
            REVEAL: 'REVEAL',
            COMPLETE: 'COMPLETE',
        };

        const AppState = {
            SELECT_TOPIC: 'SELECT_TOPIC',
            PLAY_GAME: 'PLAY_GAME'
        };

        const RAW_DATA = {
            "This is...": [
                { en: "This is an alligator.", vi: "ÄÃ¢y lÃ  con cÃ¡ sáº¥u ðŸŠ" },
                { en: "This is an ant.", vi: "ÄÃ¢y lÃ  con kiáº¿n ðŸœ" },
                { en: "This is an apple.", vi: "ÄÃ¢y lÃ  quáº£ tÃ¡o ðŸŽ" },
                { en: "This is a ball.", vi: "ÄÃ¢y lÃ  quáº£ bÃ³ng âš½" },
                { en: "This is a banana.", vi: "ÄÃ¢y lÃ  quáº£ chuá»‘i ðŸŒ" },
                { en: "This is a bear.", vi: "ÄÃ¢y lÃ  con gáº¥u ðŸ»" },
                { en: "This is a car.", vi: "ÄÃ¢y lÃ  chiáº¿c Ã´ tÃ´ ðŸš—" },
                { en: "This is a cat.", vi: "ÄÃ¢y lÃ  con mÃ¨o ðŸ±" },
                { en: "This is a cow.", vi: "ÄÃ¢y lÃ  con bÃ² ðŸ„" },
                { en: "This is a dog.", vi: "ÄÃ¢y lÃ  con chÃ³ ðŸ¶" },
                { en: "This is a drum.", vi: "ÄÃ¢y lÃ  cÃ¡i trá»‘ng ðŸ¥" },
                { en: "This is a duck.", vi: "ÄÃ¢y lÃ  con vá»‹t ðŸ¦¢" },
                { en: "This is an ear.", vi: "ÄÃ¢y lÃ  cÃ¡i tai ðŸ‘‚" },
                { en: "This is an egg.", vi: "ÄÃ¢y lÃ  quáº£ trá»©ng ðŸ¥š" },
                { en: "This is an elephant.", vi: "ÄÃ¢y lÃ  con voi ðŸ˜" },
                { en: "This is a fan.", vi: "ÄÃ¢y lÃ  cÃ¡i quáº¡t ðŸª­" },
                { en: "This is a fish.", vi: "ÄÃ¢y lÃ  con cÃ¡ ðŸ " },
                { en: "This is a frog.", vi: "ÄÃ¢y lÃ  con áº¿ch ðŸ¸" },
                { en: "This is a gift.", vi: "ÄÃ¢y lÃ  mÃ³n quÃ  ðŸŽ" },
                { en: "This is a goat.", vi: "ÄÃ¢y lÃ  con dÃª ðŸ" },
                { en: "This is a bunch of grapes.", vi: "ÄÃ¢y lÃ  chÃ¹m nho ðŸ‡" },
                { en: "This is a hat.", vi: "ÄÃ¢y lÃ  cÃ¡i mÅ© ðŸ§¢" },
                { en: "This is a horse.", vi: "ÄÃ¢y lÃ  con ngá»±a ðŸŽ" },
                { en: "This is a house.", vi: "ÄÃ¢y lÃ  ngÃ´i nhÃ  ðŸ " },
                { en: "This is an ice cream.", vi: "ÄÃ¢y lÃ  cÃ¢y kem ðŸ¨" },
                { en: "This is an igloo.", vi: "ÄÃ¢y lÃ  nhÃ  tuyáº¿t ðŸ â„ï¸" },
                { en: "This is an insect.", vi: "ÄÃ¢y lÃ  con cÃ´n trÃ¹ng ðŸž" },
                { en: "This is a jar.", vi: "ÄÃ¢y lÃ  cÃ¡i lá» ðŸ«™" },
                { en: "This is a jelly.", vi: "ÄÃ¢y lÃ  mÃ³n tháº¡ch ðŸ®" },
                { en: "This is a juice.", vi: "ÄÃ¢y lÃ  ly nÆ°á»›c Ã©p ðŸ§ƒ" },
                { en: "This is a kangaroo.", vi: "ÄÃ¢y lÃ  con chuá»™t tÃºi ðŸ¦˜" },
                { en: "This is a key.", vi: "ÄÃ¢y lÃ  chÃ¬a khÃ³a ðŸ”‘" },
                { en: "This is a kite.", vi: "ÄÃ¢y lÃ  con diá»u ðŸª" },
                { en: "This is a lamp.", vi: "ÄÃ¢y lÃ  cÃ¡i Ä‘Ã¨n ðŸª”" },
                { en: "This is a leaf.", vi: "ÄÃ¢y lÃ  chiáº¿c lÃ¡ ðŸƒ" },
                { en: "This is a lion.", vi: "ÄÃ¢y lÃ  con sÆ° tá»­ ðŸ¦" },
                { en: "This is some milk.", vi: "ÄÃ¢y lÃ  Ã­t sá»¯a ðŸ¥›" },
                { en: "This is the moon.", vi: "ÄÃ¢y lÃ  máº·t trÄƒng ðŸŒ™" },
                { en: "This is a monkey.", vi: "ÄÃ¢y lÃ  con khá»‰ ðŸ’" },
                { en: "This is a net.", vi: "ÄÃ¢y lÃ  cÃ¡i lÆ°á»›i ðŸ•¸ï¸" },
                { en: "This is a nest.", vi: "ÄÃ¢y lÃ  cÃ¡i tá»• ðŸªº" },
                { en: "This is a nose.", vi: "ÄÃ¢y lÃ  cÃ¡i mÅ©i ðŸ‘ƒ" },
                { en: "This is an octopus.", vi: "ÄÃ¢y lÃ  con báº¡ch tuá»™c ðŸ™" },
                { en: "This is an orange.", vi: "ÄÃ¢y lÃ  quáº£ cam ðŸŠ" },
                { en: "This is an owl.", vi: "ÄÃ¢y lÃ  con cÃº ðŸ¦‰" },
                { en: "This is a pen.", vi: "ÄÃ¢y lÃ  cÃ¢y bÃºt ðŸ–‹ï¸" },
                { en: "This is a pig.", vi: "ÄÃ¢y lÃ  con lá»£n ðŸ·" },
                { en: "This is a pizza.", vi: "ÄÃ¢y lÃ  cÃ¡i pizza ðŸ•" },
                { en: "This is a quail.", vi: "ÄÃ¢y lÃ  con chim cÃºt ðŸ¦" },
                { en: "This is a queen.", vi: "ÄÃ¢y lÃ  ná»¯ hoÃ ng ðŸ‘‘" },
                { en: "This is a quilt.", vi: "ÄÃ¢y lÃ  cÃ¡i chÄƒn ðŸ›ï¸" },
                { en: "This is a rabbit.", vi: "ÄÃ¢y lÃ  con thá» ðŸ°" },
                { en: "This is the rain.", vi: "ÄÃ¢y lÃ  cÆ¡n mÆ°a â˜”" },
                { en: "This is a robot.", vi: "ÄÃ¢y lÃ  con robot ðŸ¤–" },
                { en: "This is a sock.", vi: "ÄÃ¢y lÃ  cÃ¡i táº¥t ðŸ§¦" },
                { en: "This is a star.", vi: "ÄÃ¢y lÃ  ngÃ´i sao â­" },
                { en: "This is the sun.", vi: "ÄÃ¢y lÃ  máº·t trá»i â˜€ï¸" },
                { en: "This is a table.", vi: "ÄÃ¢y lÃ  cÃ¡i bÃ n ðŸª‘" },
                { en: "This is a tiger.", vi: "ÄÃ¢y lÃ  con há»• ðŸ…" },
                { en: "This is a turtle.", vi: "ÄÃ¢y lÃ  con rÃ¹a ðŸ¢" },
                { en: "This is an umbrella.", vi: "ÄÃ¢y lÃ  cÃ¡i Ã´ â˜‚ï¸" },
                { en: "This is a unicorn.", vi: "ÄÃ¢y lÃ  con ká»³ lÃ¢n ðŸ¦„" },
                { en: "This is a uniform.", vi: "ÄÃ¢y lÃ  bá»™ Ä‘á»“ng phá»¥c ðŸ‘•" },
                { en: "This is a van.", vi: "ÄÃ¢y lÃ  chiáº¿c xe táº£i ðŸš" },
                { en: "This is a vest.", vi: "ÄÃ¢y lÃ  Ã¡o vest ðŸ¦º" },
                { en: "This is a violin.", vi: "ÄÃ¢y lÃ  Ä‘Ã n violin ðŸŽ»" },
                { en: "This is a watch.", vi: "ÄÃ¢y lÃ  Ä‘á»“ng há»“ âŒš" },
                { en: "This is a whale.", vi: "ÄÃ¢y lÃ  con cÃ¡ voi ðŸ³" },
                { en: "This is a window.", vi: "ÄÃ¢y lÃ  cá»­a sá»• ðŸªŸ" },
                { en: "This is an x-ray.", vi: "ÄÃ¢y lÃ  tia X â˜¢ï¸" },
                { en: "This is a xylophone.", vi: "ÄÃ¢y lÃ  Ä‘Ã n xylophone ðŸŽ¹" },
                { en: "This is a yak.", vi: "ÄÃ¢y lÃ  con bÃ² TÃ¢y Táº¡ng ðŸ¦¬" },
                { en: "This is something yellow.", vi: "ÄÃ¢y lÃ  thá»© mÃ u vÃ ng ðŸ’›" },
                { en: "This is a yo-yo.", vi: "ÄÃ¢y lÃ  con yo-yo ðŸª€" },
                { en: "This is a zebra.", vi: "ÄÃ¢y lÃ  con ngá»±a váº±n ðŸ¦“" },
                { en: "This is a zip.", vi: "ÄÃ¢y lÃ  khÃ³a kÃ©o ðŸ¤" },
                { en: "This is a zoo.", vi: "ÄÃ¢y lÃ  sá»Ÿ thÃº ðŸ¦’" }
            ],
            "Like, Love & Have": [
                { en: "I have one pen.", vi: "TÃ´i cÃ³ má»™t cÃ¢y bÃºt ðŸ–Šï¸" },
                { en: "I have two books.", vi: "TÃ´i cÃ³ hai cuá»‘n sÃ¡ch ðŸ“š" },
                { en: "I have three cats.", vi: "TÃ´i cÃ³ ba con mÃ¨o ðŸ±" },
                { en: "I have four pencils.", vi: "TÃ´i cÃ³ bá»‘n cÃ¢y bÃºt chÃ¬ âœï¸" },
                { en: "I have five crayons.", vi: "TÃ´i cÃ³ nÄƒm cÃ¢y bÃºt mÃ u ðŸ–ï¸" },
                { en: "I have six bags.", vi: "TÃ´i cÃ³ sÃ¡u cÃ¡i tÃºi ðŸ‘œ" },
                { en: "I have seven toys.", vi: "TÃ´i cÃ³ báº£y mÃ³n Ä‘á»“ chÆ¡i ðŸ§¸" },
                { en: "I have eight rulers.", vi: "TÃ´i cÃ³ tÃ¡m cÃ¢y thÆ°á»›c ðŸ“" },
                { en: "I have nine books.", vi: "TÃ´i cÃ³ chÃ­n cuá»‘n sÃ¡ch ðŸ“š" },
                { en: "I have ten pens.", vi: "TÃ´i cÃ³ mÆ°á»i cÃ¢y bÃºt ðŸ–Šï¸" },
                { en: "I like red.", vi: "TÃ´i thÃ­ch mÃ u Ä‘á» â¤ï¸" },
                { en: "I like blue.", vi: "TÃ´i thÃ­ch mÃ u xanh lam ðŸ’™" },
                { en: "I like yellow.", vi: "TÃ´i thÃ­ch mÃ u vÃ ng ðŸ’›" },
                { en: "I like green.", vi: "TÃ´i thÃ­ch mÃ u xanh lÃ¡ ðŸ’š" },
                { en: "I like black.", vi: "TÃ´i thÃ­ch mÃ u Ä‘en ðŸ–¤" },
                { en: "I like white.", vi: "TÃ´i thÃ­ch mÃ u tráº¯ng ðŸ¤" },
                { en: "I like pink.", vi: "TÃ´i thÃ­ch mÃ u há»“ng ðŸ’—" },
                { en: "I like brown.", vi: "TÃ´i thÃ­ch mÃ u nÃ¢u ðŸ¤Ž" },
                { en: "I like orange.", vi: "TÃ´i thÃ­ch mÃ u cam ðŸ§¡" },
                { en: "I like purple.", vi: "TÃ´i thÃ­ch mÃ u tÃ­m ðŸ’œ" },
                { en: "I like grey.", vi: "TÃ´i thÃ­ch mÃ u xÃ¡m ðŸ©¶" },
                { en: "I like light blue.", vi: "TÃ´i thÃ­ch mÃ u xanh nháº¡t ðŸ©µ" },
                { en: "I like dark green.", vi: "TÃ´i thÃ­ch mÃ u xanh Ä‘áº­m ðŸŒ²" },
                { en: "I like dogs.", vi: "TÃ´i thÃ­ch chÃ³ ðŸ¶" },
                { en: "I like cats.", vi: "TÃ´i thÃ­ch mÃ¨o ðŸ±" },
                { en: "I like birds.", vi: "TÃ´i thÃ­ch chim ðŸ¦" },
                { en: "I like fish.", vi: "TÃ´i thÃ­ch cÃ¡ ðŸ " },
                { en: "I like ducks.", vi: "TÃ´i thÃ­ch vá»‹t ðŸ¦¢" },
                { en: "I like chickens.", vi: "TÃ´i thÃ­ch gÃ  ðŸ”" },
                { en: "I like cows.", vi: "TÃ´i thÃ­ch bÃ² ðŸ„" },
                { en: "I like pigs.", vi: "TÃ´i thÃ­ch lá»£n ðŸ·" },
                { en: "I like horses.", vi: "TÃ´i thÃ­ch ngá»±a ðŸŽ" },
                { en: "I like sheep.", vi: "TÃ´i thÃ­ch cá»«u ðŸ‘" },
                { en: "I like lions.", vi: "TÃ´i thÃ­ch sÆ° tá»­ ðŸ¦" },
                { en: "I like tigers.", vi: "TÃ´i thÃ­ch há»• ðŸ…" },
                { en: "I like elephants.", vi: "TÃ´i thÃ­ch voi ðŸ˜" },
                { en: "I like monkeys.", vi: "TÃ´i thÃ­ch khá»‰ ðŸ’" },
                { en: "I like bears.", vi: "TÃ´i thÃ­ch gáº¥u ðŸ»" },
                { en: "I have a book.", vi: "TÃ´i cÃ³ má»™t cuá»‘n sÃ¡ch ðŸ“–" },
                { en: "I have a pen.", vi: "TÃ´i cÃ³ má»™t cÃ¢y bÃºt ðŸ–‹ï¸" },
                { en: "I have a pencil.", vi: "TÃ´i cÃ³ má»™t cÃ¢y bÃºt chÃ¬ âœï¸" },
                { en: "I have an eraser.", vi: "TÃ´i cÃ³ má»™t cá»¥c táº©y ðŸ§½" },
                { en: "I have a ruler.", vi: "TÃ´i cÃ³ má»™t cÃ¢y thÆ°á»›c ðŸ“" },
                { en: "I have a bag.", vi: "TÃ´i cÃ³ má»™t cÃ¡i tÃºi ðŸ‘œ" },
                { en: "I have a notebook.", vi: "TÃ´i cÃ³ má»™t cuá»‘n sá»• tay ðŸ““" },
                { en: "I have a sharpener.", vi: "TÃ´i cÃ³ má»™t cÃ¡i gá»t bÃºt chÃ¬ âœ‚ï¸" },
                { en: "I have a board.", vi: "TÃ´i cÃ³ má»™t báº£ng ðŸ–¼ï¸" },
                { en: "I have chalk.", vi: "TÃ´i cÃ³ pháº¥n viáº¿t báº£ng ðŸ§‘â€ðŸ«" },
                { en: "I have a desk.", vi: "TÃ´i cÃ³ má»™t cÃ¡i bÃ n ðŸª‘" },
                { en: "I have a chair.", vi: "TÃ´i cÃ³ má»™t cÃ¡i gháº¿ ðŸª‘" },
                { en: "I have a crayon.", vi: "TÃ´i cÃ³ má»™t cÃ¢y bÃºt mÃ u ðŸ–ï¸" },
                { en: "I have glue.", vi: "TÃ´i cÃ³ keo dÃ¡n ðŸ§´" },
                { en: "I have scissors.", vi: "TÃ´i cÃ³ má»™t cÃ¡i kÃ©o âœ‚ï¸" },
                { en: "I have English lessons.", vi: "TÃ´i cÃ³ cÃ¡c buá»•i há»c tiáº¿ng Anh ðŸ“š" },
                { en: "I love English.", vi: "TÃ´i yÃªu tiáº¿ng Anh â¤ï¸" },
                { en: "I have a pencil.", vi: "TÃ´i cÃ³ má»™t cÃ¢y bÃºt chÃ¬. âœï¸" },
                { en: "I have a book.", vi: "TÃ´i cÃ³ má»™t quyá»ƒn sÃ¡ch. ðŸ“–" },
                { en: "I have an eraser.", vi: "TÃ´i cÃ³ má»™t cá»¥c táº©y. ðŸ§¼" },
                { en: "I have a ruler.", vi: "TÃ´i cÃ³ má»™t cÃ¢y thÆ°á»›c. ðŸ“" },
                { en: "I have a school bag.", vi: "TÃ´i cÃ³ má»™t cÃ¡i cáº·p Ä‘i há»c. ðŸŽ’" },
                { en: "I have a teddy bear.", vi: "TÃ´i cÃ³ má»™t con gáº¥u bÃ´ng. ðŸ§¸" },
                { en: "I have a toy car.", vi: "TÃ´i cÃ³ má»™t chiáº¿c Ã´ tÃ´ Ä‘á»“ chÆ¡i. ðŸš—" },
                { en: "I have a robot.", vi: "TÃ´i cÃ³ má»™t con rÃ´-bá»‘t. ðŸ¤–" },
                { en: "I have a ball.", vi: "TÃ´i cÃ³ má»™t quáº£ bÃ³ng. âš½" },
                { en: "I have a doll.", vi: "TÃ´i cÃ³ má»™t con bÃºp bÃª. ðŸŽŽ" },
                { en: "I have a dog.", vi: "TÃ´i cÃ³ má»™t con chÃ³. ðŸ¶" },
                { en: "I have a cat.", vi: "TÃ´i cÃ³ má»™t con mÃ¨o. ðŸ±" },
                { en: "I have a fish.", vi: "TÃ´i cÃ³ má»™t con cÃ¡. ðŸ " },
                { en: "I have a bird.", vi: "TÃ´i cÃ³ má»™t con chim. ðŸ¦" },
                { en: "I have a rabbit.", vi: "TÃ´i cÃ³ má»™t con thá». ðŸ°" },
                { en: "I have an apple.", vi: "TÃ´i cÃ³ má»™t quáº£ tÃ¡o. ðŸŽ" },
                { en: "I have a banana.", vi: "TÃ´i cÃ³ má»™t quáº£ chuá»‘i. ðŸŒ" },
                { en: "I have a sandwich.", vi: "TÃ´i cÃ³ má»™t cÃ¡i bÃ¡nh mÃ¬ káº¹p. ðŸ¥ª" },
                { en: "I have a cake.", vi: "TÃ´i cÃ³ má»™t cÃ¡i bÃ¡nh ngá»t. ðŸ°" },
                { en: "I have a drink.", vi: "TÃ´i cÃ³ má»™t Ä‘á»“ uá»‘ng. ðŸ¥¤" }
            ],
            "Alphabet": [
                { en: "A is for alligator.", vi: "A lÃ  A trong tá»« alligator. ðŸŠ" },
                { en: "A is for ant.", vi: "A lÃ  A trong tá»« ant. ðŸœ" },
                { en: "A is for apple.", vi: "A lÃ  A trong tá»« apple. ðŸŽ" },
                { en: "B is for ball.", vi: "B lÃ  B trong tá»« ball. âš½" },
                { en: "B is for banana.", vi: "B lÃ  B trong tá»« banana. ðŸŒ" },
                { en: "B is for bear.", vi: "B lÃ  B trong tá»« bear. ðŸ»" },
                { en: "C is for car.", vi: "C lÃ  C trong tá»« car. ðŸš—" },
                { en: "C is for cat.", vi: "C lÃ  C trong tá»« cat. ðŸ±" },
                { en: "C is for cow.", vi: "C lÃ  C trong tá»« cow. ðŸ®" },
                { en: "D is for dog.", vi: "D lÃ  D trong tá»« dog. ðŸ¶" },
                { en: "D is for drum.", vi: "D lÃ  D trong tá»« drum. ðŸ¥" },
                { en: "D is for duck.", vi: "D lÃ  D trong tá»« duck. ðŸ¦†" },
                { en: "E is for ear.", vi: "E lÃ  E trong tá»« ear. ðŸ‘‚" },
                { en: "E is for egg.", vi: "E lÃ  E trong tá»« egg. ðŸ¥š" },
                { en: "E is for elephant.", vi: "E lÃ  E trong tá»« elephant. ðŸ˜" },
                { en: "F is for fish.", vi: "F lÃ  F trong tá»« fish. ðŸ " },
                { en: "F is for frog.", vi: "F lÃ  F trong tá»« frog. ðŸ¸" },
                { en: "G is for gift.", vi: "G lÃ  G trong tá»« gift. ðŸŽ" },
                { en: "G is for goat.", vi: "G lÃ  G trong tá»« goat. ðŸ" },
                { en: "G is for grapes.", vi: "G lÃ  G trong tá»« grapes. ðŸ‡" },
                { en: "H is for hat.", vi: "H lÃ  H trong tá»« hat. ðŸ‘’" },
                { en: "H is for horse.", vi: "H lÃ  H trong tá»« horse. ðŸ´" },
                { en: "H is for house.", vi: "H lÃ  H trong tá»« house. ðŸ " },
                { en: "I is for ice cream.", vi: "I lÃ  I trong tá»« ice cream. ðŸ¦" },
                { en: "I is for insect.", vi: "I lÃ  I trong tá»« insect. ðŸž" },
                { en: "K is for kangaroo.", vi: "K lÃ  K trong tá»« kangaroo. ðŸ¦˜" },
                { en: "K is for key.", vi: "K lÃ  K trong tá»« key. ðŸ”‘" },
                { en: "K is for kite.", vi: "K lÃ  K trong tá»« kite. ðŸª" },
                { en: "L is for leaf.", vi: "L lÃ  L trong tá»« leaf. ðŸƒ" },
                { en: "L is for lion.", vi: "L lÃ  L trong tá»« lion. ðŸ¦" },
                { en: "M is for milk.", vi: "M lÃ  M trong tá»« milk. ðŸ¥›" },
                { en: "M is for moon.", vi: "M lÃ  M trong tá»« moon. ðŸŒ™" },
                { en: "M is for monkey.", vi: "M lÃ  M trong tá»« monkey. ðŸ’" },
                { en: "N is for net.", vi: "N lÃ  N trong tá»« net. ðŸ•¸ï¸" },
                { en: "N is for nose.", vi: "N lÃ  N trong tá»« nose. ðŸ‘ƒ" },
                { en: "O is for octopus.", vi: "O lÃ  O trong tá»« octopus. ðŸ™" },
                { en: "O is for orange.", vi: "O lÃ  O trong tá»« orange. ðŸŠ" },
                { en: "O is for owl.", vi: "O lÃ  O trong tá»« owl. ðŸ¦‰" },
                { en: "P is for pen.", vi: "P lÃ  P trong tá»« pen. ðŸ–Šï¸" },
                { en: "P is for pig.", vi: "P lÃ  P trong tá»« pig. ðŸ·" },
                { en: "P is for pizza.", vi: "P lÃ  P trong tá»« pizza. ðŸ•" },
                { en: "R is for rabbit.", vi: "R lÃ  R trong tá»« rabbit. ðŸ°" },
                { en: "R is for robot.", vi: "R lÃ  R trong tá»« robot. ðŸ¤–" },
                { en: "S is for sock.", vi: "S lÃ  S trong tá»« sock. ðŸ§¦" },
                { en: "S is for star.", vi: "S lÃ  S trong tá»« star. â­" },
                { en: "S is for sun.", vi: "S lÃ  S trong tá»« sun. â˜€ï¸" },
                { en: "T is for tiger.", vi: "T lÃ  T trong tá»« tiger. ðŸ¯" },
                { en: "T is for turtle.", vi: "T lÃ  T trong tá»« turtle. ðŸ¢" },
                { en: "U is for umbrella.", vi: "U lÃ  U trong tá»« umbrella. â˜‚ï¸" },
                { en: "U is for unicorn.", vi: "U lÃ  U trong tá»« unicorn. ðŸ¦„" },
                { en: "U is for uniform.", vi: "U lÃ  U trong tá»« uniform. ðŸ‘•" },
                { en: "V is for van.", vi: "V lÃ  V trong tá»« van. ðŸš" },
                { en: "V is for violin.", vi: "V lÃ  V trong tá»« violin. ðŸŽ»" },
                { en: "W is for watch.", vi: "W lÃ  W trong tá»« watch. âŒš" },
                { en: "W is for whale.", vi: "W lÃ  W trong tá»« whale. ðŸ³" },
                { en: "Y is for yo-yo.", vi: "Y lÃ  Y trong tá»« yo-yo. ðŸª€" },
                { en: "Z is for zebra.", vi: "Z lÃ  Z trong tá»« zebra. ðŸ¦“" }
            ],
            "I Want...": [
                { en: "I want to play.", vi: "TÃ´i muá»‘n chÆ¡i. ðŸŽ®" },
                { en: "I want to eat.", vi: "TÃ´i muá»‘n Äƒn. ðŸ”" },
                { en: "I want to drink.", vi: "TÃ´i muá»‘n uá»‘ng. ðŸ¥¤" },
                { en: "I want to sleep.", vi: "TÃ´i muá»‘n ngá»§. ðŸ˜´" },
                { en: "I want to read.", vi: "TÃ´i muá»‘n Ä‘á»c. ðŸ“–" },
                { en: "I want to write.", vi: "TÃ´i muá»‘n viáº¿t. âœï¸" },
                { en: "I want to draw.", vi: "TÃ´i muá»‘n váº½. ðŸŽ¨" },
                { en: "I want to sing.", vi: "TÃ´i muá»‘n hÃ¡t. ðŸŽ¤" },
                { en: "I want to dance.", vi: "TÃ´i muá»‘n nháº£y. ðŸ’ƒ" },
                { en: "I want to run.", vi: "TÃ´i muá»‘n cháº¡y. ðŸƒ" },
                { en: "I want to jump.", vi: "TÃ´i muá»‘n nháº£y. ðŸ¤¸" },
                { en: "I want to swim.", vi: "TÃ´i muá»‘n bÆ¡i. ðŸŠ" },
                { en: "I want to watch TV.", vi: "TÃ´i muá»‘n xem TV. ðŸ“º" },
                { en: "I want to learn.", vi: "TÃ´i muá»‘n há»c. ðŸ§ " },
                { en: "I want to go home.", vi: "TÃ´i muá»‘n vá» nhÃ . ðŸ " },
                { en: "I want to help.", vi: "TÃ´i muá»‘n giÃºp Ä‘á»¡. ðŸ¤" },
                { en: "I want to open the door.", vi: "TÃ´i muá»‘n má»Ÿ cá»­a. ðŸšª" },
                { en: "I want to close the book.", vi: "TÃ´i muá»‘n Ä‘Ã³ng sÃ¡ch láº¡i. ðŸ“•" },
                { en: "I want to buy a toy.", vi: "TÃ´i muá»‘n mua má»™t mÃ³n Ä‘á»“ chÆ¡i. ðŸ§¸" },
                { en: "I want to see my mom.", vi: "TÃ´i muá»‘n gáº·p máº¹ tÃ´i. ðŸ‘©â€ðŸ‘§" },
                { en: "I want to play with my friends.", vi: "TÃ´i muá»‘n chÆ¡i vá»›i báº¡n bÃ¨ cá»§a tÃ´i. ðŸ§‘â€ðŸ¤â€ðŸ§‘" },
                { en: "I want to eat ice cream.", vi: "TÃ´i muá»‘n Äƒn kem. ðŸ¦" },
                { en: "I want to drink milk.", vi: "TÃ´i muá»‘n uá»‘ng sá»¯a. ðŸ¥›" },
                { en: "I want to sleep in my bed.", vi: "TÃ´i muá»‘n ngá»§ trÃªn giÆ°á»ng cá»§a tÃ´i. ðŸ›ï¸" },
                { en: "I want to read a book.", vi: "TÃ´i muá»‘n Ä‘á»c má»™t quyá»ƒn sÃ¡ch. ðŸ“š" },
                { en: "I want to write my name.", vi: "TÃ´i muá»‘n viáº¿t tÃªn cá»§a tÃ´i. âœï¸" },
                { en: "I want to draw a cat.", vi: "TÃ´i muá»‘n váº½ má»™t con mÃ¨o. ðŸˆ" },
                { en: "I want to sing a song.", vi: "TÃ´i muá»‘n hÃ¡t má»™t bÃ i hÃ¡t. ðŸŽ¶" },
                { en: "I want to dance with my sister.", vi: "TÃ´i muá»‘n nháº£y vá»›i chá»‹ gÃ¡i cá»§a tÃ´i. ðŸ’ƒ" },
                { en: "I want to run in the park.", vi: "TÃ´i muá»‘n cháº¡y trong cÃ´ng viÃªn. ðŸƒ" },
                { en: "I want to jump high.", vi: "TÃ´i muá»‘n nháº£y cao. ðŸ¤¸" },
                { en: "I want to swim in the pool.", vi: "TÃ´i muá»‘n bÆ¡i trong há»“ bÆ¡i. ðŸŠ" },
                { en: "I want to watch cartoons.", vi: "TÃ´i muá»‘n xem phim hoáº¡t hÃ¬nh. ðŸ“º" },
                { en: "I want to learn English.", vi: "TÃ´i muá»‘n há»c tiáº¿ng Anh. ðŸ‡¬ðŸ‡§" },
                { en: "I want to go to school.", vi: "TÃ´i muá»‘n Ä‘i há»c. ðŸ«" },
                { en: "I want to help my dad.", vi: "TÃ´i muá»‘n giÃºp bá»‘ tÃ´i. ðŸ‘¨â€ðŸ‘§" },
                { en: "I want to open my bag.", vi: "TÃ´i muá»‘n má»Ÿ cáº·p cá»§a tÃ´i. ðŸŽ’" },
                { en: "I want to close the window.", vi: "TÃ´i muá»‘n Ä‘Ã³ng cá»­a sá»•. ðŸªŸ" },
                { en: "I want to buy some candy.", vi: "TÃ´i muá»‘n mua má»™t Ã­t káº¹o. ðŸ¬" },
                { en: "I want to see my teacher.", vi: "TÃ´i muá»‘n gáº·p giÃ¡o viÃªn cá»§a tÃ´i. ðŸ‘©â€ðŸ«" }
            ],
            "I Like...": [
                { en: "I like apples.", vi: "TÃ´i thÃ­ch tÃ¡o. ðŸŽ" },
                { en: "I like bananas.", vi: "TÃ´i thÃ­ch chuá»‘i. ðŸŒ" },
                { en: "I like milk.", vi: "TÃ´i thÃ­ch sá»¯a. ðŸ¥›" },
                { en: "I like cats.", vi: "TÃ´i thÃ­ch mÃ¨o. ðŸˆ" },
                { en: "I like dogs.", vi: "TÃ´i thÃ­ch chÃ³. ðŸ•" },
                { en: "I like my school.", vi: "TÃ´i thÃ­ch trÆ°á»ng cá»§a tÃ´i. ðŸ«" },
                { en: "I like my teacher.", vi: "TÃ´i quÃ½ cÃ´ giÃ¡o cá»§a tÃ´i. ðŸ‘©â€ðŸ«" },
                { en: "I like my friends.", vi: "TÃ´i quÃ½ báº¡n bÃ¨ cá»§a tÃ´i. ðŸ§‘â€ðŸ¤â€ðŸ§‘" },
                { en: "I like music.", vi: "TÃ´i thÃ­ch Ã¢m nháº¡c. ðŸŽµ" },
                { en: "I like books.", vi: "TÃ´i thÃ­ch sÃ¡ch. ðŸ“š" },
                { en: "I like rice.", vi: "TÃ´i thÃ­ch cÆ¡m. ðŸš" },
                { en: "I like fish.", vi: "TÃ´i thÃ­ch cÃ¡. ðŸŸ" },
                { en: "I like birds.", vi: "TÃ´i thÃ­ch chim. ðŸ¦" },
                { en: "I like flowers.", vi: "TÃ´i thÃ­ch hoa. ðŸŒ¸" },
                { en: "I like the sun.", vi: "TÃ´i thÃ­ch máº·t trá»i. â˜€ï¸" },
                { en: "I like the moon.", vi: "TÃ´i thÃ­ch máº·t trÄƒng. ðŸŒ™" },
                { en: "I like the stars.", vi: "TÃ´i thÃ­ch nhá»¯ng ngÃ´i sao. â­" },
                { en: "I like my room.", vi: "TÃ´i thÃ­ch phÃ²ng cá»§a tÃ´i. ðŸ›Œ" },
                { en: "I like my shoes.", vi: "TÃ´i thÃ­ch giÃ y cá»§a tÃ´i. ðŸ‘Ÿ" },
                { en: "I like my bike.", vi: "TÃ´i thÃ­ch xe Ä‘áº¡p cá»§a tÃ´i. ðŸš²" }
            ],
            "I Can...": [
                { en: "I can run.", vi: "TÃ´i cÃ³ thá»ƒ cháº¡y. ðŸƒ" },
                { en: "I can jump.", vi: "TÃ´i cÃ³ thá»ƒ nháº£y. ðŸ¤¸" },
                { en: "I can swim.", vi: "TÃ´i cÃ³ thá»ƒ bÆ¡i. ðŸŠ" },
                { en: "I can draw.", vi: "TÃ´i cÃ³ thá»ƒ váº½. ðŸŽ¨" },
                { en: "I can sing.", vi: "TÃ´i cÃ³ thá»ƒ hÃ¡t. ðŸŽ¤" },
                { en: "I can dance.", vi: "TÃ´i cÃ³ thá»ƒ nháº£y. ðŸ’ƒ" },
                { en: "I can read.", vi: "TÃ´i cÃ³ thá»ƒ Ä‘á»c. ðŸ“–" },
                { en: "I can write.", vi: "TÃ´i cÃ³ thá»ƒ viáº¿t. âœï¸" },
                { en: "I can ride a bike.", vi: "TÃ´i cÃ³ thá»ƒ Ä‘i xe Ä‘áº¡p. ðŸš²" },
                { en: "I can play football.", vi: "TÃ´i cÃ³ thá»ƒ chÆ¡i bÃ³ng Ä‘Ã¡. âš½" },
                { en: "I can draw a flower.", vi: "TÃ´i cÃ³ thá»ƒ váº½ má»™t bÃ´ng hoa. ðŸŒ¸" },
                { en: "I can color a picture.", vi: "TÃ´i cÃ³ thá»ƒ tÃ´ mÃ u má»™t bá»©c tranh. ðŸ–ï¸" },
                { en: "I can count to ten.", vi: "TÃ´i cÃ³ thá»ƒ Ä‘áº¿m Ä‘áº¿n mÆ°á»i. ðŸ”Ÿ" },
                { en: "I can clap my hands.", vi: "TÃ´i cÃ³ thá»ƒ vá»— tay. ðŸ‘" },
                { en: "I can smile.", vi: "TÃ´i cÃ³ thá»ƒ cÆ°á»i. ðŸ˜Š" },
                { en: "I can stand up.", vi: "TÃ´i cÃ³ thá»ƒ Ä‘á»©ng lÃªn. ðŸ§" },
                { en: "I can sit down.", vi: "TÃ´i cÃ³ thá»ƒ ngá»“i xuá»‘ng. ðŸª‘" },
                { en: "I can read a story.", vi: "TÃ´i cÃ³ thá»ƒ Ä‘á»c má»™t cÃ¢u chuyá»‡n. ðŸ“–" },
                { en: "I can jump rope.", vi: "TÃ´i cÃ³ thá»ƒ nháº£y dÃ¢y. ðŸ¤¸" },
                { en: "I can kick a ball.", vi: "TÃ´i cÃ³ thá»ƒ Ä‘Ã¡ má»™t quáº£ bÃ³ng. âš½" }
            ],
            "This is / That is...": [
                { en: "This is my bag.", vi: "ÄÃ¢y lÃ  cáº·p cá»§a tÃ´i. ðŸŽ’" },
                { en: "This is my book.", vi: "ÄÃ¢y lÃ  sÃ¡ch cá»§a tÃ´i. ðŸ“–" },
                { en: "This is my pen.", vi: "ÄÃ¢y lÃ  bÃºt cá»§a tÃ´i. ðŸ–Šï¸" },
                { en: "This is my chair.", vi: "ÄÃ¢y lÃ  gháº¿ cá»§a tÃ´i. ðŸª‘" },
                { en: "This is my hat.", vi: "ÄÃ¢y lÃ  mÅ© cá»§a tÃ´i. ðŸ‘’" },
                { en: "That is my house.", vi: "Kia lÃ  nhÃ  cá»§a tÃ´i. ðŸ " },
                { en: "That is my school.", vi: "Kia lÃ  trÆ°á»ng cá»§a tÃ´i. ðŸ«" },
                { en: "That is my mom.", vi: "Kia lÃ  máº¹ cá»§a tÃ´i. ðŸ‘©â€ðŸ‘§" },
                { en: "That is my dad.", vi: "Kia lÃ  bá»‘ cá»§a tÃ´i. ðŸ‘¨â€ðŸ‘§" },
                { en: "That is my toy.", vi: "Kia lÃ  Ä‘á»“ chÆ¡i cá»§a tÃ´i. ðŸ§¸" },
                { en: "This is my table.", vi: "ÄÃ¢y lÃ  bÃ n cá»§a tÃ´i. ðŸ½ï¸" },
                { en: "This is my cup.", vi: "ÄÃ¢y lÃ  cá»‘c cá»§a tÃ´i. ðŸ¥¤" },
                { en: "This is my plate.", vi: "ÄÃ¢y lÃ  Ä‘Ä©a cá»§a tÃ´i. ðŸ½ï¸" },
                { en: "This is my toy car.", vi: "ÄÃ¢y lÃ  Ã´ tÃ´ Ä‘á»“ chÆ¡i cá»§a tÃ´i. ðŸš—" },
                { en: "This is my teddy bear.", vi: "ÄÃ¢y lÃ  gáº¥u bÃ´ng cá»§a tÃ´i. ðŸ§¸" },
                { en: "That is my school bag.", vi: "Kia lÃ  cáº·p Ä‘i há»c cá»§a tÃ´i. ðŸŽ’" },
                { en: "That is my playground.", vi: "Kia lÃ  sÃ¢n chÆ¡i cá»§a tÃ´i. ðŸ›" },
                { en: "That is my ball.", vi: "Kia lÃ  quáº£ bÃ³ng cá»§a tÃ´i. âš½" },
                { en: "That is my bike.", vi: "Kia lÃ  xe Ä‘áº¡p cá»§a tÃ´i. ðŸš²" },
                { en: "That is my bed.", vi: "Kia lÃ  giÆ°á»ng cá»§a tÃ´i. ðŸ›Œ" }
            ],
            "I Have...": [
                { en: "I have a cat.", vi: "TÃ´i cÃ³ má»™t con mÃ¨o. ðŸˆ" },
                { en: "I have a dog.", vi: "TÃ´i cÃ³ má»™t con chÃ³. ðŸ•" },
                { en: "I have a ball.", vi: "TÃ´i cÃ³ má»™t quáº£ bÃ³ng. âš½" },
                { en: "I have a kite.", vi: "TÃ´i cÃ³ má»™t con diá»u. ðŸª" },
                { en: "I have a bike.", vi: "TÃ´i cÃ³ má»™t chiáº¿c xe Ä‘áº¡p. ðŸš²" },
                { en: "I have a doll.", vi: "TÃ´i cÃ³ má»™t con bÃºp bÃª. ðŸŽŽ" },
                { en: "I have a red bag.", vi: "TÃ´i cÃ³ má»™t chiáº¿c cáº·p mÃ u Ä‘á». ðŸŽ’" },
                { en: "I have two pencils.", vi: "TÃ´i cÃ³ hai cÃ¢y bÃºt chÃ¬. âœï¸" },
                { en: "I have three books.", vi: "TÃ´i cÃ³ ba quyá»ƒn sÃ¡ch. ðŸ“š" },
                { en: "I have ten pencils.", vi: "TÃ´i cÃ³ mÆ°á»i cÃ¢y bÃºt chÃ¬. âœï¸" },
                { en: "I have a red apple.", vi: "TÃ´i cÃ³ má»™t quáº£ tÃ¡o Ä‘á». ðŸŽ" },
                { en: "I have a yellow hat.", vi: "TÃ´i cÃ³ má»™t chiáº¿c mÅ© mÃ u vÃ ng. ðŸ‘’" },
                { en: "I have a blue pen.", vi: "TÃ´i cÃ³ má»™t cÃ¢y bÃºt mÃ u xanh. ðŸ–Šï¸" },
                { en: "I have a big ball.", vi: "TÃ´i cÃ³ má»™t quáº£ bÃ³ng to. âš½" },
                { en: "I have a small kite.", vi: "TÃ´i cÃ³ má»™t con diá»u nhá». ðŸª" },
                { en: "I have a happy family.", vi: "TÃ´i cÃ³ má»™t gia Ä‘Ã¬nh háº¡nh phÃºc. ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦" },
                { en: "I have two eyes.", vi: "TÃ´i cÃ³ hai máº¯t. ðŸ‘€" },
                { en: "I have two hands.", vi: "TÃ´i cÃ³ hai tay. ðŸ™Œ" },
                { en: "I have ten fingers.", vi: "TÃ´i cÃ³ mÆ°á»i ngÃ³n tay. ðŸ–ï¸" },
                { en: "I have a new book.", vi: "TÃ´i cÃ³ má»™t quyá»ƒn sÃ¡ch má»›i. ðŸ“–" }
            ]
        };

        const TOPICS_DATA = Object.entries(RAW_DATA).map(([title, pairs]) => ({
            title,
            pairs: pairs.map(p => ({ english: p.en, vietnamese: p.vi }))
        }));

        // --- App Component ---
        const SpeakerIcon = ({ className }) => (
            React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", className: className || "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: 2 },
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", d: "M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" })
            )
        );

        const App = () => {
            const [appState, setAppState] = useState(AppState.SELECT_TOPIC);
            const [selectedTopic, setSelectedTopic] = useState(null);

            const [sentences, setSentences] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [gameState, setGameState] = useState(GameState.READ);
            const [isSpeaking, setIsSpeaking] = useState(false);
            const [voices, setVoices] = useState([]);
            const [selectedVoiceURI, setSelectedVoiceURI] = useState(null);
            
            const canSpeak = 'speechSynthesis' in window;

            // Load voices
            useEffect(() => {
                if (!canSpeak) return;

                const loadVoices = () => {
                    const allVoices = window.speechSynthesis.getVoices();
                    const sortedVoices = allVoices.sort((a, b) => {
                        const aEn = a.lang.includes('en');
                        const bEn = b.lang.includes('en');
                        if (aEn && !bEn) return -1;
                        if (!aEn && bEn) return 1;
                        return a.name.localeCompare(b.name);
                    });
                    
                    setVoices(sortedVoices);
                    if (sortedVoices.length > 0 && !selectedVoiceURI) {
                         const defaultVoice = sortedVoices.find(v => v.name.includes('Google US English')) || sortedVoices.find(v => v.lang.includes('en-US')) || sortedVoices[0];
                         setSelectedVoiceURI(defaultVoice.voiceURI);
                    }
                };

                loadVoices();
                window.speechSynthesis.onvoiceschanged = loadVoices;
                return () => { window.speechSynthesis.onvoiceschanged = null; };
            }, [canSpeak, selectedVoiceURI]);

            const shuffleSentences = useCallback((pairs) => {
                return [...pairs].sort(() => Math.random() - 0.5);
            }, []);

            const currentPair = useMemo(() => {
                if (sentences.length === 0) {
                    return { english: 'Loading...', vietnamese: 'Äang táº£i...' };
                }
                return sentences[currentIndex];
            }, [sentences, currentIndex]);

            const handleSpeak = useCallback((textToSpeak) => {
                if (canSpeak && textToSpeak && textToSpeak !== 'Loading...') {
                    let textWithoutEmoji = textToSpeak;
                    const lastPunctuationIndex = Math.max(
                        textToSpeak.lastIndexOf('.'),
                        textToSpeak.lastIndexOf('!'),
                        textToSpeak.lastIndexOf('?')
                    );

                    if (lastPunctuationIndex > -1 && lastPunctuationIndex < textToSpeak.length - 1) {
                        if (textToSpeak.substring(lastPunctuationIndex + 1).trim().length > 0) {
                            textWithoutEmoji = textToSpeak.substring(0, lastPunctuationIndex + 1);
                        }
                    }
                    
                    const utterance = new SpeechSynthesisUtterance(textWithoutEmoji);
                    utterance.lang = 'en-US';
                    
                    if (selectedVoiceURI) {
                        const voice = voices.find(v => v.voiceURI === selectedVoiceURI);
                        if (voice) utterance.voice = voice;
                    }

                    utterance.onstart = () => setIsSpeaking(true);
                    utterance.onend = () => setIsSpeaking(false);
                    utterance.onerror = () => setIsSpeaking(false);
                    window.speechSynthesis.cancel();
                    window.speechSynthesis.speak(utterance);
                }
            }, [canSpeak, voices, selectedVoiceURI]);

            const handleTopicSelect = useCallback((topic) => {
                setSelectedTopic(topic);
                setSentences(shuffleSentences(topic.pairs));
                setCurrentIndex(0);
                setGameState(GameState.READ);
                setAppState(AppState.PLAY_GAME);
            }, [shuffleSentences]);

            const handleBackToTopics = useCallback(() => {
                setAppState(AppState.SELECT_TOPIC);
                setSelectedTopic(null);
                setSentences([]);
            }, []);
            
            const handleRestart = useCallback(() => {
                if (selectedTopic) {
                    setSentences(shuffleSentences(selectedTopic.pairs));
                    setCurrentIndex(0);
                    setGameState(GameState.READ);
                }
            }, [selectedTopic, shuffleSentences]);

            const handleNextAction = useCallback(() => {
                window.speechSynthesis.cancel();
                if (gameState === GameState.READ) {
                    setGameState(GameState.TRANSLATE);
                } else if (gameState === GameState.TRANSLATE) {
                    setGameState(GameState.REVEAL);
                } else if (gameState === GameState.REVEAL) {
                    if (currentIndex === sentences.length - 1) {
                        setGameState(GameState.COMPLETE);
                    } else {
                        setCurrentIndex((prevIndex) => prevIndex + 1);
                        setGameState(GameState.READ);
                    }
                }
            }, [gameState, sentences.length, currentIndex]);
            
            const handlePreviousAction = useCallback(() => {
                window.speechSynthesis.cancel();
                // Reverse the flow: READ (next) -> REVEAL (prev) -> TRANSLATE (prev) -> READ (prev)
                
                if (gameState === GameState.READ) {
                    if (currentIndex > 0) {
                        setCurrentIndex(prev => prev - 1);
                        setGameState(GameState.REVEAL);
                    }
                } else if (gameState === GameState.REVEAL) {
                    setGameState(GameState.TRANSLATE);
                } else if (gameState === GameState.TRANSLATE) {
                    setGameState(GameState.READ);
                }
            }, [gameState, currentIndex]);

            const renderTopicSelection = () => (
                React.createElement('div', { className: "w-full max-w-6xl mx-auto animate-fade-in" },
                    React.createElement('header', { className: "text-center py-8" },
                        React.createElement('h1', { className: "text-3xl sm:text-4xl font-bold text-sky-800" }, "Bilingual Flashcards ðŸ‡»ðŸ‡³ðŸ‡¬ðŸ‡§"),
                        React.createElement('p', { className: "text-lg text-slate-600 mt-2" }, "Choose a topic to start practicing!")
                    ),
                    React.createElement('div', { className: "grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-4" },
                        TOPICS_DATA.map(topic => (
                            React.createElement('button', {
                                key: topic.title,
                                onClick: () => handleTopicSelect(topic),
                                className: "bg-white/70 backdrop-blur-md p-4 rounded-lg shadow-md hover:shadow-xl text-slate-800 font-semibold text-center transition-all duration-300 ease-in-out transform hover:-translate-y-1 hover:scale-105"
                            }, topic.title)
                        ))
                    )
                )
            );

            const renderGame = () => {
                const progress = sentences.length > 0 ? ((currentIndex + 1) / sentences.length) * 100 : 0;
                const progressText = sentences.length > 0 ? `${currentIndex + 1} / ${sentences.length}` : '0 / 0';
                const buttonText = (() => {
                     switch (gameState) {
                        case GameState.READ: return "Practice Translation";
                        case GameState.TRANSLATE: return "Show English Answer";
                        case GameState.REVEAL: return "Next Sentence â†’";
                        default: return "Next";
                    }
                })();
                
                const canGoBack = !(currentIndex === 0 && gameState === GameState.READ);

                return (
                    React.createElement('div', { className: "w-full max-w-4xl flex-grow flex flex-col animate-fade-in" },
                        React.createElement('header', { className: "text-center py-4 relative flex flex-col items-center" },
                             React.createElement('div', { className: "w-full flex justify-between items-center mb-2 px-2 sm:px-0" },
                                React.createElement('button', {
                                    onClick: handleBackToTopics,
                                    className: "text-indigo-600 hover:text-indigo-800 font-semibold transition-colors duration-200 p-2 rounded-md hover:bg-indigo-100 flex items-center"
                                }, "â† Topics"),
                                canSpeak && voices.length > 0 && React.createElement('div', { className: "flex items-center gap-2" },
                                    React.createElement('span', { className: "text-xs text-slate-500 font-medium hidden sm:inline" }, "Voice:"),
                                    React.createElement('select', {
                                        value: selectedVoiceURI || '',
                                        onChange: (e) => setSelectedVoiceURI(e.target.value),
                                        className: "text-sm border border-slate-300 rounded-md p-1 bg-white/80 max-w-[150px] sm:max-w-xs truncate focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                    }, 
                                        voices.map(v => React.createElement('option', { key: v.voiceURI, value: v.voiceURI }, v.name))
                                    )
                                )
                             ),
                            React.createElement('h1', { className: "text-2xl sm:text-3xl font-bold text-sky-800 px-8" }, selectedTopic?.title || "Bilingual Flashcards"),
                            React.createElement('p', { className: "text-lg text-slate-600 mt-1" }, "English & Vietnamese Practice")
                        ),
                        
                        React.createElement('div', { className: "w-full my-4" },
                            React.createElement('div', { className: "flex justify-between items-center text-sm text-slate-600 mb-1 px-1" },
                                React.createElement('span', null, "Progress"),
                                React.createElement('span', { className: "font-medium" }, gameState === GameState.COMPLETE ? `Complete! ðŸŽ‰` : progressText)
                            ),
                            React.createElement('div', { className: "w-full h-3 bg-slate-300/80 rounded-full overflow-hidden" },
                                React.createElement('div', {
                                    className: "h-full bg-gradient-to-r from-sky-400 to-indigo-500 transition-all duration-500 ease-out",
                                    style: { width: `${gameState === GameState.COMPLETE ? 100 : progress}%` }
                                })
                            )
                        ),

                        React.createElement('div', { className: "flex-grow flex items-center justify-center" },
                            React.createElement('div', { className: "bg-white/70 backdrop-blur-md rounded-2xl shadow-lg p-6 sm:p-10 md:p-12 w-full text-center flex flex-col justify-center min-h-[350px] md:min-h-[450px]" },
                                gameState === GameState.READ && (
                                    React.createElement('div', { className: "space-y-6 animate-fade-in" },
                                        React.createElement('div', null,
                                            React.createElement('p', { className: "text-sm font-medium text-indigo-600 mb-2" }, "READ (Tiáº¿ng Anh)"),
                                            React.createElement('div', { className: "flex items-center justify-center gap-x-4" },
                                                React.createElement('p', { className: "text-3xl md:text-5xl font-semibold text-slate-900" }, currentPair.english),
                                                canSpeak && React.createElement('button', { onClick: () => handleSpeak(currentPair.english), disabled: isSpeaking, className: `p-3 rounded-full transition-all duration-200 disabled:cursor-wait ${isSpeaking ? 'text-sky-600 bg-sky-100 animate-pulse' : 'text-slate-500 hover:bg-sky-100'}`, 'aria-label': "Read sentence aloud" }, React.createElement(SpeakerIcon, { className: "h-7 w-7" }))
                                            )
                                        ),
                                        React.createElement('hr', { className: "border-slate-300 w-1/4 mx-auto" }),
                                        React.createElement('div', null,
                                            React.createElement('p', { className: "text-sm text-slate-500 mb-2" }, "TRANSLATION (Tiáº¿ng Viá»‡t)"),
                                            React.createElement('p', { className: "text-xl md:text-3xl text-slate-700" }, currentPair.vietnamese)
                                        )
                                    )
                                ),
                                gameState === GameState.TRANSLATE && (
                                    React.createElement('div', { className: "space-y-4 animate-fade-in" },
                                        React.createElement('p', { className: "text-sm font-medium text-indigo-600 mb-2" }, "TRANSLATE THIS TO ENGLISH"),
                                        React.createElement('p', { className: "text-3xl md:text-5xl font-semibold text-slate-900" }, currentPair.vietnamese)
                                    )
                                ),
                                gameState === GameState.REVEAL && (
                                     React.createElement('div', { className: "space-y-6 animate-fade-in" },
                                        React.createElement('div', null,
                                            React.createElement('p', { className: "text-sm text-slate-500 mb-2" }, "YOUR SENTENCE (Tiáº¿ng Viá»‡t)"),
                                            React.createElement('p', { className: "text-xl md:text-3xl text-slate-700" }, currentPair.vietnamese)
                                        ),
                                        React.createElement('hr', { className: "border-slate-300 w-1/4 mx-auto" }),
                                        React.createElement('div', null,
                                            React.createElement('p', { className: "text-sm font-medium text-indigo-600 mb-2" }, "CORRECT ANSWER (Tiáº¿ng Anh)"),
                                             React.createElement('div', { className: "flex items-center justify-center gap-x-4" },
                                                React.createElement('p', { className: "text-3xl md:text-5xl font-semibold text-slate-900" }, currentPair.english),
                                                canSpeak && React.createElement('button', { onClick: () => handleSpeak(currentPair.english), disabled: isSpeaking, className: `p-3 rounded-full transition-all duration-200 disabled:cursor-wait ${isSpeaking ? 'text-sky-600 bg-sky-100 animate-pulse' : 'text-slate-500 hover:bg-sky-100'}`, 'aria-label': "Read sentence aloud" }, React.createElement(SpeakerIcon, { className: "h-7 w-7" }))
                                            )
                                        )
                                    )
                                ),
                                gameState === GameState.COMPLETE && (
                                     React.createElement('div', { className: "space-y-4 animate-fade-in text-center" },
                                        React.createElement('p', { className: "text-6xl md:text-7xl" }, "ðŸŽ‰"),
                                        React.createElement('h2', { className: "text-3xl md:text-4xl font-bold text-sky-800" }, "Topic Complete!"),
                                        React.createElement('p', { className: "text-lg text-slate-600" }, "You've finished all sentences for this topic."),
                                        React.createElement('div', { className: "flex flex-col sm:flex-row items-center justify-center gap-4 mt-8" },
                                            React.createElement('button', {
                                                onClick: handleRestart,
                                                className: "w-full sm:w-auto bg-indigo-500 hover:bg-indigo-600 text-white font-bold text-lg py-3 px-6 rounded-full shadow-lg hover:shadow-indigo-500/50 transform hover:-translate-y-1 transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 focus:ring-indigo-300"
                                            }, "Play Topic Again ðŸ”„"),
                                            React.createElement('button', {
                                                onClick: handleBackToTopics,
                                                className: "w-full sm:w-auto bg-sky-500 hover:bg-sky-600 text-white font-bold text-lg py-3 px-6 rounded-full shadow-lg hover:shadow-sky-500/50 transform hover:-translate-y-1 transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 focus:ring-sky-300"
                                            }, "Choose Another Topic ðŸ“š")
                                        )
                                     )
                                )
                            )
                        ),

                        React.createElement('div', { className: "sticky bottom-0 py-4 mt-auto bg-slate-100/50 backdrop-blur-sm -mx-4 px-4 sm:-mx-6 sm:px-6 flex gap-3 justify-center" },
                           gameState !== GameState.COMPLETE && React.createElement(React.Fragment, null,
                               React.createElement('button', {
                                    onClick: handlePreviousAction,
                                    disabled: !canGoBack,
                                    className: "flex-1 max-w-[120px] bg-slate-300 hover:bg-slate-400 disabled:opacity-50 disabled:cursor-not-allowed text-slate-800 font-bold text-lg py-4 px-4 rounded-full shadow-md transition-all duration-300 ease-in-out"
                                }, "â¬… Back"),
                                React.createElement('button', {
                                    onClick: handleNextAction,
                                    disabled: sentences.length === 0,
                                    className: "flex-[2] max-w-md bg-indigo-500 hover:bg-indigo-600 disabled:bg-slate-400 disabled:cursor-not-allowed text-white font-bold text-lg py-4 px-8 rounded-full shadow-lg hover:shadow-indigo-500/50 transform hover:-translate-y-1 transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 focus:ring-indigo-300"
                                }, buttonText)
                           )
                        )
                    )
                );
            }

            return (
                React.createElement('main', { className: "min-h-screen bg-gradient-to-br from-slate-100 to-sky-200 text-slate-800 flex flex-col items-center justify-center p-4 sm:p-6 font-sans" },
                   appState === AppState.SELECT_TOPIC ? renderTopicSelection() : renderGame()
                )
            );
        };
        
        const rootElement = document.getElementById('root');
        if (!rootElement) {
          throw new Error("Could not find root element to mount to");
        }

        const root = ReactDOM.createRoot(rootElement);
        root.render(
          React.createElement(React.StrictMode, null, React.createElement(App, null))
        );
    </script>
</body>
</html>
